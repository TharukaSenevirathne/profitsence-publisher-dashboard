<div class="ad-units-page">
  <div class="page-inner">
    
    <div class="header">
      <h1>Ad Units</h1>
    </div>

    <div class="controls-section flex justify-content-between align-items-center mb-4">
      <p-dropdown 
        [options]="sites" 
        [(ngModel)]="selectedSite" 
        optionLabel="name" 
        optionValue="name" 
        placeholder="Select Site / App" 
        styleClass="custom-dropdown"
        appendTo="body">
      </p-dropdown>

      <p-button 
        label="‎ ‎ Create New" 
        icon="pi pi-plus" 
        styleClass="p-button-danger big-btn" 
        (onClick)="openCreateModal()">
      </p-button>
    </div>

    <div class="table-section">
      <p-table [value]="adUnits" styleClass="p-datatable-striped">
        <ng-template pTemplate="header">
          <tr>
            <th>Site / App</th>
            <th>Ad Unit</th>
            <th>Code</th>
            <th>Status</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-unit>
          <tr>
            <td>{{ unit.site }}</td>
            <td>{{ unit.unit }}</td>
            <td class="code-cell">
              <code>{{ unit.code }}</code>
              <button 
                pButton 
                icon="pi pi-copy" 
                class="p-button-text p-button-secondary p-button-sm copy-btn" 
                (click)="copyCode(unit.code)" 
                pTooltip="Copy" 
                tooltipPosition="top">
              </button>
            </td>
            <td>
              <p-tag [value]="unit.status" [severity]="getSeverity(unit.status)"></p-tag>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <div class="note">
      <p><strong>Note:</strong> You will get ad codes within 24 hours after creating. If you need any help please contact your account manager or send an email to <a href="mailto:info&#64;profitsence.com">info&#64;profitsence.com</a></p>
    </div>
  </div>

  <p-dialog 
    header="Create New" 
    [(visible)]="showCreateModal" 
    [modal]="true" 
    [style]="{ width: '500px' }" 
    [draggable]="false" 
    [resizable]="false">
    
    <div class="modal-body flex flex-column gap-4">
      
      <div class="field">
        <label class="block mb-2 font-bold text-900">Site / App</label>
        <p-dropdown 
          [options]="sites" 
          optionLabel="name" 
          optionValue="name" 
          placeholder="Select Site / App" 
          styleClass="w-full modal-dropdown"
          appendTo="body">
        </p-dropdown>
      </div>

      <div class="field">
        <label class="block mb-2 font-bold text-900">Options</label>
        <p-dropdown 
          [options]="adOptions" 
          [(ngModel)]="selectedNewAdOption"
          optionLabel="label" 
          optionValue="value" 
          placeholder="Select Options" 
          styleClass="w-full modal-dropdown"
          appendTo="body">
        </p-dropdown>
      </div>
    </div>

    <ng-template pTemplate="footer">
      <div class="flex justify-content-center w-full">
        <p-button 
          label="Submit" 
          styleClass="p-button-danger big-btn px-6" 
          (onClick)="submitCreate()">
        </p-button>
      </div>
    </ng-template>
  </p-dialog>
</div>