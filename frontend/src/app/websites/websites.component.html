<div class="websites-container">
  <!-- Rejection Reasons Modal -->
  @if (showRejectionModal) {
    <div class="modal-backdrop" (click)="closeRejectionModal()">
      <div class="modal rejection-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h2 class="modal-title">Rejection Reasons</h2>
          <button type="button" class="modal-close" (click)="closeRejectionModal()" aria-label="Close">×</button>
        </div>
        <div class="rejection-modal-divider"></div>
        @if (selectedRejectionReasonsParagraphs.length) {
          <div class="rejection-content">
            @for (paragraph of selectedRejectionReasonsParagraphs; track $index) {
              <p class="rejection-paragraph">{{ paragraph }}</p>
            }
          </div>
        }
      </div>
    </div>
  }

  <!-- Re-Submit Confirmation Modal -->
  @if (showResubmitModal) {
  <div class="modal-backdrop" (click)="closeResubmitModal()">
    <div class="modal resubmit-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Are you sure to Re Submit ?</h2>
        <button type="button" class="modal-close" (click)="closeResubmitModal()" aria-label="Close">×</button>
      </div>
      <div class="resubmit-modal-divider"></div>
      <div class="resubmit-content">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
      </div>
      <div class="resubmit-actions">
        <button type="button" class="btn-resubmit-confirm" (click)="confirmResubmit()">Re-Submit</button>
        <button type="button" class="btn-resubmit-cancel" (click)="closeResubmitModal()">Cancel</button>
      </div>
    </div>
  </div>
  }

  <!-- Create New Website Modal -->
  @if (showCreateModal) {
  <div class="modal-backdrop" (click)="closeCreateModal()">
    <div class="modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Create New</h2>
        <button type="button" class="modal-close" (click)="closeCreateModal()" aria-label="Close">×</button>
      </div>
      <div class="modal-form">
        <input
          id="domain-name"
          type="text"
          class="modal-input"
          placeholder="Domain Name"
          [(ngModel)]="newDomainName"
        />
        <select
          id="select-category"
          class="modal-select"
          [(ngModel)]="newCategory"
        >
          <option value="" disabled>Select Category</option>
          @for (cat of categories; track cat) {
            <option [value]="cat">{{ cat }}</option>
          }
        </select>
      </div>
      <button type="button" class="modal-submit" (click)="submitNewWebsite()">Submit</button>
    </div>
  </div>
  }

  <div class="page-header">
    <h1 class="page-title">Websites</h1>
    <button type="button" class="btn-add-website" (click)="addNewWebsite()">Add New Website</button>
  </div>

  <div class="table-wrapper">
    <table class="websites-table">
      <thead>
        <tr>
          <th class="col-domain">Domain</th>
          <th class="col-category">Category</th>
          <th class="col-status">Status</th>
          <th class="col-options">Options</th>
        </tr>
      </thead>
      <tbody>
        @for (site of websites; track site.domain) {
          <tr>
            <td class="col-domain">{{ site.domain }}</td>
            <td class="col-category">{{ site.category }}</td>
            <td class="col-status">
              <span class="status-badge status-{{ site.status }}">
                {{ site.status === 'approved' ? 'Approved' : site.status === 'rejected' ? 'Rejected' : site.status === 'pending' ? 'Pending' : 'Verifying' }}
              </span>
            </td>
            <td class="col-options">
              <div class="options-block">
                @if (site.status === 'approved') {
                  <hr class="options-divider" />
                  <div class="options-row options-row-single">
                    <button type="button" class="btn btn-ad-units" (click)="openAdUnits()">&lt;/&gt; Ad Units</button>
                  </div>
                  <hr class="options-divider" />
                }
                @if (site.status === 'rejected') {
                  <hr class="options-divider" />
                  <div class="options-row options-row-double">
                    <button type="button" class="btn btn-rejection" (click)="showRejectionReasons(site)">Rejection Reasons</button>
                    <button type="button" class="btn btn-resubmit" (click)="openResubmitModal(site)">Re-Submit</button>
                  </div>
                  <hr class="options-divider" />
                }
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  <section class="minimum-requirements">
    <h2 class="requirements-title">Minimum Requirements</h2>
    <ol class="requirements-list">
      <li>Minimum of 100,000 pageviews per month.</li>
      <li>Content safe (no nudity/sexuality/adult content).</li>
      <li>Add our ads.txt lines to your site's ads.txt file.</li>
    </ol>
    <p class="requirements-note">
      Note: You need to add the ads.txt lines to your website (www.exampl.com/ads.txt) after we are verifying your website.<br>
      If you need any help please contact your account mananger or send an email to info&#64;profitsence.com
    </p>
  </section>
</div>
